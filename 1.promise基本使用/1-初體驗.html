<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>基本使用</title>
    <link crossorigin='anonymous' href="https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css"
        rel="stylesheet">
</head>

<body>
    <div class="container">
        <h2 class="page-header">Promise 初体验</h2>
        <button class="btn btn-primary" id="btn">点击抽奖</button>
    </div>
    <script>
        // 生成隨機數
        rand = (m, n) => {
            return Math.ceil(Math.random() * (n - m + 1)) + m - 1;
        }
        // 點擊按鈕1s後顯示是否中獎(30%機率中獎)
        //     若中獎彈出 恭喜恭喜 
        //     若未中獎彈出 再接再厲

        // 獲取元素對象
        const btn = document.querySelector('#btn');
        // // 綁定點擊事件
        btn.addEventListener('click', () => {
            //     setTimeout(()=>{
            //         // 獲取 1-100的隨機數
            //         let n = rand(1,100);
            //         // 判斷
            //         if(n <=30){
            //             alert(`恭喜恭喜，數字為${n}`);
            //         }else{
            //             alert(`再接再厲，數字為${n}`);
            //         }
            //     },1000);


            // Promise 形式呈現
            // resolve 解決 函數類型的數據
            // reject  拒絕 函數類型的數據
            const p = new Promise((resolve, reject) => {
                setTimeout(() => {
                    // 獲取 1-100的隨機數
                    let n = rand(1, 100);
                    // 判斷
                    if (n <= 30) {
                        resolve(n);
                    } else {
                        reject(n);
                    }
                }, 1000);
            })
            //調用.then方法
            //成功時 調用第一個函數 失敗時調用第二個函數
            p.then((n) => {
                alert(`恭喜恭喜，數字為${n}`);
            }, (n) => {
                alert(`再接再厲，數字為${n}`);
            });
        })








    </script>
</body>

</html>